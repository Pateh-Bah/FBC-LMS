<header class="shadow-xl border-b-4 border-fbc-green-500 bg-gradient-to-r from-fbc-navy-800 to-fbc-navy-700" id="header">
    <div class="flex items-center justify-between px-6 py-4">
        <div class="flex items-center space-x-4">
            <button class="p-3 rounded-xl text-white hover:bg-fbc-green-600 hover:bg-opacity-30 transition-all duration-300 lg:hidden sidebar-toggle">
                <i class="fas fa-bars text-lg"></i>
            </button>
            <button class="hidden lg:block p-3 rounded-xl text-white hover:bg-fbc-green-600 hover:bg-opacity-30 transition-all duration-300 sidebar-toggle">
                <i class="fas fa-bars text-lg"></i>
            </button>
            <div class="ml-4">
                <h1 class="text-2xl font-serif font-bold text-white text-contrast">{% block page_title %}
                    {% if user.user_type == 'admin' %}
                        Administrative Dashboard
                    {% elif user.user_type == 'staff' %}
                        Staff Dashboard
                    {% elif user.user_type == 'lecturer' %}
                        Lecturer Dashboard
                    {% elif user.user_type == 'student' %}
                        Student Dashboard
                    {% else %}
                        Library Dashboard
                    {% endif %}
                {% endblock %}</h1>
                <p class="text-base text-fbc-green-200 mt-1 font-body">Welcome to your management panel</p>
            </div>
        </div>
        
        <div class="flex items-center space-x-6">
           
            <!-- Notifications -->
            <div class="relative">
                <button class="relative p-3 rounded-xl text-white hover:bg-fbc-green-600 hover:bg-opacity-30 transition-all duration-300">
                    <i class="fas fa-bell text-xl text-fbc-green-300"></i>
                    <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse border-2 border-white"></span>
                </button>
            </div>
            
            <!-- User Info -->
            <div class="flex items-center space-x-4">
                <div class="text-right hidden sm:block">
                    <p class="text-fbc-green-200 text-base font-body">Welcome back,</p>
                    <p class="text-white font-serif font-semibold text-lg text-contrast">{{ user.get_full_name|default:user.username }}</p>
                </div>
                
                <!-- Enhanced Profile Dropdown -->
                <div class="relative" x-data="{ open: false }">
                    <button @click="open = !open" @click.away="open = false"
                            class="flex items-center space-x-3 p-3 rounded-xl text-white hover:bg-fbc-green-600 hover:bg-opacity-30 transition-all duration-300">
                        <div class="w-10 h-10 bg-fbc-green-500 bg-opacity-30 rounded-full flex items-center justify-center border-2 border-fbc-green-400">
                            <i class="fas fa-user text-lg text-fbc-green-300"></i>
                        </div>
                        <i class="fas fa-chevron-down text-sm transition-transform duration-300" 
                           :class="{ 'rotate-180': open }"></i>
                    </button>
                    
                    <!-- Enhanced Dropdown Menu -->
                    <div x-show="open" 
                         x-transition:enter="transition ease-out duration-300"
                         x-transition:enter-start="opacity-0 scale-95 translate-y-2"
                         x-transition:enter-end="opacity-100 scale-100 translate-y-0"
                         x-transition:leave="transition ease-in duration-200"
                         x-transition:leave-start="opacity-100 scale-100 translate-y-0"
                         x-transition:leave-end="opacity-0 scale-95 translate-y-2"
                         class="absolute right-0 mt-3 w-56 bg-white rounded-xl shadow-2xl border border-fbc-green-200 z-50 overflow-hidden">
                        <div class="py-2">
                            <div class="px-4 py-3 bg-fbc-green-50 border-b border-fbc-green-100">
                                <p class="text-sm font-body text-fbc-navy-700">Signed in as</p>
                                <p class="text-base font-serif font-semibold text-fbc-navy-900 truncate">{{ user.get_full_name|default:user.username }}</p>
                            </div>
                            <a href="{% url 'fbc_users:profile' %}" 
                               class="flex items-center px-4 py-3 text-fbc-navy-700 hover:bg-fbc-green-50 transition-colors duration-200 font-body">
                                <i class="fas fa-user-circle text-lg mr-3 text-fbc-green-600"></i>
                                My Profile
                            </a>
                            {% if request.user.user_type == 'admin' %}
                            <a href="{% url 'fbc_users:system_settings' %}" 
                               class="flex items-center px-4 py-3 text-fbc-navy-700 hover:bg-fbc-green-50 transition-colors duration-200 font-body">
                                <i class="fas fa-cogs text-lg mr-3 text-fbc-green-600"></i>
                                System Settings
                            </a>
                            {% endif %}
                            <div class="border-t border-fbc-green-100 my-1"></div>
                            <a href="{% url 'fbc_users:logout' %}" 
                               class="flex items-center px-4 py-3 text-red-700 hover:bg-red-50 transition-colors duration-200 font-body">
                                <i class="fas fa-sign-out-alt text-lg mr-3 text-red-500"></i>
                                Logout
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
